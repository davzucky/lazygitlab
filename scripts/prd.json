{
  "title": "LazyGitLab - Part 1: Foundation & Core Architecture",
  "branchName": "feature/part1-foundation",
  "issue": {
    "number": 1,
    "url": "https://github.com/davzucky/lazygitlab/issues/1",
    "state": "OPEN"
  },
  "introduction": "LazyGitLab is a terminal user interface (TUI) application for managing GitLab operations, inspired by lazygit and lazydocker. The goal is to simplify and streamline GitLab workflows by providing a fast, keyboard-driven interface for managing issues, merge requests, and code reviews directly from the command line. This PRD covers the foundational architecture, project setup, and core components that will be used across all features.",
  "goals": [
    "Create a Go-based TUI application using the same patterns as lazygit/lazydocker",
    "Support both gitlab.com and self-hosted GitLab instances",
    "Implement flexible authentication (glab config, custom config, environment variables)",
    "Establish a modular architecture that supports future feature expansion",
    "Provide a responsive, keyboard-driven interface with optional mouse support"
  ],
  "userStories": [
    {
      "id": "US-001",
      "title": "Initialize Go Project with TUI Framework",
      "description": "As a developer, I need the project scaffolding with proper Go module setup and TUI library integration so that I can build the application.",
      "acceptanceCriteria": [
        "Go module initialized with appropriate path",
        "gocui or tcell/tview library integrated",
        "Basic main.go with application entry point",
        "Makefile with `build`, `run`, `test`, and `lint` targets",
        "`.gitignore` configured for Go projects",
        "Project compiles and runs showing empty TUI window"
      ],
      "status": "completed",
      "passes": true
    },
    {
      "id": "US-002",
      "title": "Implement Configuration Management",
      "description": "As a user, I want lazygitlab to read my GitLab configuration so that I don't have to reconfigure authentication.",
      "acceptanceCriteria": [
        "Read glab CLI config from `~/.config/glab-cli/config.yml` if it exists",
        "Support custom config file at `~/.config/lazygitlab/config.yml`",
        "Support `GITLAB_TOKEN` and `GITLAB_HOST` environment variables",
        "Config precedence: env vars > lazygitlab config > glab config",
        "Validate token on startup with API call",
        "Clear error message when no valid configuration found"
      ],
      "status": "pending",
      "passes": false,
      "dependsOn": ["US-001"]
    },
    {
      "id": "US-003",
      "title": "Create GitLab API Client",
      "description": "As a developer, I need a GitLab API client abstraction so that all features can interact with GitLab consistently.",
      "acceptanceCriteria": [
        "Wrapper around go-gitlab library",
        "Support for custom GitLab host URLs (self-hosted instances)",
        "Automatic pagination handling for list endpoints",
        "Rate limiting awareness and retry logic",
        "Error handling with user-friendly messages",
        "Interface-based design for testing/mocking"
      ],
      "status": "pending",
      "passes": false,
      "dependsOn": ["US-002"]
    },
    {
      "id": "US-004",
      "title": "Build Main Application Layout",
      "description": "As a user, I want to see a structured TUI layout so that I can navigate between different GitLab entities.",
      "acceptanceCriteria": [
        "Multi-panel layout similar to lazygit (sidebar + main content + details)",
        "Left sidebar with navigation options (Projects, Issues, Merge Requests)",
        "Main panel showing list of selected entity type",
        "Bottom panel showing details/preview of selected item",
        "Status bar showing current project/context and connection status"
      ],
      "status": "completed",
      "passes": true,
      "dependsOn": ["US-001"]
    },
    {
      "id": "US-005",
      "title": "Implement Keyboard Navigation System",
      "description": "As a user, I want to navigate the TUI using keyboard shortcuts so that I can work efficiently without a mouse.",
      "acceptanceCriteria": [
        "`j`/`k` or arrow keys for up/down navigation in lists",
        "`h`/`l` or arrow keys for panel switching",
        "`Enter` to select/open item, `Esc` to go back/close popup",
        "`q` to quit, `?` to show help/keybindings popup",
        "Tab/Shift+Tab for panel cycling"
      ],
      "status": "completed",
      "passes": true,
      "dependsOn": ["US-004"]
    },
    {
      "id": "US-006",
      "title": "Implement Project Context Management",
      "description": "As a user, I want lazygitlab to automatically detect my current project context so that I see relevant issues and MRs.",
      "acceptanceCriteria": [
        "Auto-detect GitLab project from git remote URL in current directory",
        "Support for SSH and HTTPS remote URL formats",
        "Support for subgroups in project path",
        "Manual project selection via command line flag `--project`",
        "Display current project in status bar"
      ],
      "status": "pending",
      "passes": false,
      "dependsOn": ["US-003", "US-004"]
    },
    {
      "id": "US-007",
      "title": "Create Loading and Error States",
      "description": "As a user, I want to see loading indicators and clear error messages so that I know what's happening.",
      "acceptanceCriteria": [
        "Loading spinner/indicator when fetching data from API",
        "Error popup for API failures with retry option",
        "Log file for debugging (`~/.local/share/lazygitlab/debug.log`)",
        "`--debug` flag to enable verbose logging"
      ],
      "status": "pending",
      "passes": false,
      "dependsOn": ["US-004"]
    },
    {
      "id": "US-008",
      "title": "Implement First-Run Setup Flow",
      "description": "As a new user, I want to be guided through initial setup so that I can start using lazygitlab quickly.",
      "acceptanceCriteria": [
        "Detect if no valid configuration exists on startup",
        "Interactive prompt to enter GitLab host URL and personal access token",
        "Validate credentials before saving",
        "Save configuration to `~/.config/lazygitlab/config.yml`"
      ],
      "status": "pending",
      "passes": false,
      "dependsOn": ["US-002", "US-004"]
    }
  ],
  "technicalConsiderations": {
    "dependencies": [
      {
        "name": "Go",
        "version": "1.21+",
        "purpose": "Programming language"
      },
      {
        "name": "go-gitlab",
        "purpose": "GitLab API client"
      },
      {
        "name": "gocui or bubbletea",
        "purpose": "TUI framework"
      },
      {
        "name": "viper",
        "purpose": "Configuration management"
      },
      {
        "name": "cobra",
        "purpose": "CLI argument parsing"
      }
    ],
    "projectStructure": {
      "cmd/lazygitlab/main.go": "Application entry point",
      "pkg/app/": "Main application logic",
      "pkg/config/": "Configuration management",
      "pkg/gitlab/": "GitLab API client wrapper",
      "pkg/gui/": "TUI components and views",
      "pkg/commands/": "Command handlers",
      "pkg/utils/": "Shared utilities",
      "docs/": "Documentation",
      "Makefile": "Build automation"
    }
  },
  "nonGoals": [
    "OAuth authentication flow",
    "GitLab CI/CD pipeline management",
    "Repository browsing/file viewing",
    "Wiki, Snippets, Package registry management",
    "Multiple simultaneous project contexts",
    "Offline mode/caching"
  ]
}
