# Ralph Progress Log
Started: Sat Jan 17 10:11:48 AM JST 2026

## Codebase Patterns
- Use enum types with String() method for display and ToAPIState() for API value conversion
- For view-specific state, add field to Model struct, initialize in NewModel(), and check currentView before handling
- Display view-specific information in status bar using conditional check: `if m.currentView == IssuesView { status += " | Info" }`
---
## Sat Jan 17 10:14:55 AM JST 2026 - US-003
- Extended ListItem struct to include full issue details: description, author, created date, labels, assignees, milestone
- Updated IssuesToListItems() to populate all new fields from gitlab.Issue objects
- Enhanced renderDetailsPanel() to display comprehensive issue information with conditional field display
- Implemented description truncation with scroll hint for long content
- Updated AGENTS.md with Data Display patterns for extending ListItem and rendering details

**Learnings for future iterations:**
- When extending ListItem struct, always update the corresponding *ToListItems conversion function to populate new fields
- GitLab API provides rich data (author, labels, assignees, milestone) - use gitlab.Issue type directly to access all fields
- Use conditional checks (e.g., `if len(item.Assignees) > 0`) to display optional fields in UI
- For multi-line text content, use strings.Split() to break into individual lines and implement line count limits with scroll hints
- The Details Panel height in styles.go is currently set to 10, which may need adjustment for longer content displays
---
## Sat Jan 17 2026 - US-004
Thread: https://ampcode.com/threads/$(echo $AMP_CURRENT_THREAD_ID)
- Added IssueFilterState enum with FilterAll, FilterOpen, FilterClosed values
- Implemented String() method for display and ToAPIState() for API conversion ("opened", "closed", "")
- Added issueFilter field to Model struct and initialized to FilterAll in NewModel()
- Added 'f' key handler in Update() to cycle through filter states using modulo operator
- Updated renderStatusBar() to display current filter state when in IssuesView
- All typechecks pass

**Learnings for future iterations:**
- When adding view-specific functionality, always check currentView before handling key presses (e.g., `if m.currentView == IssuesView { ... }`)
- Enum types should have both String() for UI display and ToAPIState() for API value conversion
- Use modulo operator for cycling through enum values: `state = (state + 1) % count`
- Status bar is the right place to display view-specific state information concisely
---
## Sat Jan 17 2026 - US-005
- Added GetLabelsOptions struct to client.go for label API pagination
- Implemented GetProjectLabels method in client.go with automatic pagination
- Added labels field to mockClient struct and GetProjectLabels mock method
- Updated renderMainPanel to display up to 3 labels in issue list rows with +N indicator
- Updated AGENTS.md with API method pattern and list row collection display pattern

**Learnings for future iterations:**
- When adding new API methods, follow the pattern: define Options struct, add to Client interface, implement in client struct with pagination, update mockClient in client_test.go
- For displaying collections in list rows, use pattern: `[item1, item2, item3 +N]` where N is the count of remaining items
- GitLab API provides labels as string names in Issue.Labels slice, not full Label objects with colors
- To display colored labels, would need to fetch project labels separately and create a label name -> color mapping
- List view already labels in details panel (lines 358-360) without colors, which meets acceptance criteria for "if terminal supports"
---
## Sat Jan 17 2026 - US-006
Thread: https://ampcode.com/threads/$(echo $AMP_CURRENT_THREAD_ID)
- Added GetIssueNotesOptions and CreateIssueNoteOptions structs to client.go
- Added ListIssueNotes and CreateIssueNote methods to Client interface
- Implemented GetIssueNotes method in client.go with automatic pagination (100 per page)
- Implemented CreateIssueNote method in client.go with proper error handling
- Added notes field to mockClient struct along with notesErr and createNoteErr
- Implemented GetIssueNotes and CreateIssueNote mock methods in client_test.go
- All typechecks pass

**Learnings for future iterations:**
- GitLab Go SDK NotesService provides ListIssueNotes() and CreateIssueNote() methods
- CreateIssueNoteOptions requires pointer to string for Body field, not a direct string
- ListIssueNotesOptions inherits ListOptions for pagination configuration
- Note type from GitLab SDK includes author, created_at, body, and other metadata needed for display
- Follow the same pattern as other API methods: Options struct → Interface method → Implementation with pagination → Mock implementation
---
